---
title: sftp
type: input
status: experimental
categories: ["Services","Network"]
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the contents of:
     lib/input/sftp.go
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

EXPERIMENTAL: This component is experimental and therefore subject to change or removal outside of major version releases.

Downloads objects via an SFTP connection.


<Tabs defaultValue="common" values={[
  { label: 'Common', value: 'common', },
  { label: 'Advanced', value: 'advanced', },
]}>

<TabItem value="common">

```yaml
# Common config fields, showing default values
input:
  sftp:
    server: ""
    port: 0
    credentials:
      username: ""
      secret: ""
    filename: ""
    path: ""
    max_connection_attempts: 10
    retry_sleep_duration: 5000
    codec: lines
```

</TabItem>
<TabItem value="advanced">

```yaml
# All config fields, showing default values
input:
  sftp:
    server: ""
    port: 0
    credentials:
      username: ""
      secret: ""
    filename: ""
    path: ""
    max_connection_attempts: 10
    retry_sleep_duration: 5000
    codec: lines
    delete_objects: false
```

</TabItem>
</Tabs>

Downloads objects via an SFTP connection.
## Metadata
This input adds the following metadata fields to each message:
```
- sftp_file_path
```
You can access these metadata fields using [function interpolation](/docs/configuration/interpolation#metadata).

## Fields

### `server`

The server to connect to that has the target files.


Type: `string`  
Default: `""`  

### `port`

The port to connect to on the server.


Type: `number`  
Default: `0`  

### `credentials`

The credentials to use to log into the server.


Type: `object`  

### `credentials.username`

The username to connect to the SFTP server.


Type: `string`  
Default: `""`  

### `credentials.secret`

The secret/password for the username to connect to the SFTP server.


Type: `string`  
Default: `""`  

### `filename`

The name of the file to pull messages from. If not provided, all the files in the path will be processed.


Type: `string`  
Default: `""`  

### `path`

The path of the directory or file that it will process.


Type: `string`  
Default: `""`  

### `max_connection_attempts`

How many times it will try to connect to the server before exiting with an error.


Type: `number`  
Default: `10`  

### `retry_sleep_duration`

How long (in milliseconds) it will sleep after failing to connect to the server before trying again.


Type: `number`  
Default: `5000`  

### `codec`

The way in which the bytes of consumed files are converted into messages, codecs are useful for specifying how large files might be processed in small chunks rather than loading it all in memory. It's possible to consume lines using a custom delimiter with the `delim:x` codec, where x is the character sequence custom delimiter.


Type: `string`  
Default: `"lines"`  

| Option | Summary |
|---|---|
| `auto` | EXPERIMENTAL: Attempts to derive a codec for each file based on information such as the extension. For example, a .tar.gz file would be consumed with the tar-gzip codec. Defaults to all-bytes. |
| `all-bytes` | Consume the entire file as a single binary message. |
| `csv` | Consume structured rows as comma separated values, the first row must be a header row. |
| `csv-gzip` | Consume structured rows as comma separated values from a gzip compressed file, the first row must be a header row. |
| `delim:x` | Consume the file in segments divided by a custom delimter. |
| `lines` | Consume the file in segments divided by linebreaks. |
| `tar` | Parse the file as a tar archive, and consume each file of the archive as a message. |
| `tar-gzip` | Parse the file as a gzip compressed tar archive, and consume each file of the archive as a message. |


```yaml
# Examples

codec: lines

codec: "delim:\t"

codec: delim:foobar
```

### `delete_objects`

Whether to delete files from the server once they are processed.


Type: `bool`  
Default: `false`  


